{"ast":null,"code":"var _jsxFileName = \"D:\\\\IT-schooll\\\\JS\\\\FinalProdject\\\\wedding-shop\\\\src\\\\Componets\\\\Catalog.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useContext, useEffect, useState } from 'react';\nimport '../style/catalog.css';\nimport Products from \"./Products\";\nimport Context from './Context';\nimport Preload from './Preload';\nimport UnionContext from './UnionContext';\nimport FilterModul from './FilterModul';\nimport Search from './Search';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Catalog() {\n  _s();\n\n  const ul = React.useRef();\n  const {\n    basketProduct,\n    setBasketProduct\n  } = useContext(UnionContext);\n  const [products, setProducts] = useState([]);\n  const [prelaod, setPrelaod] = useState(true);\n  const [filter, setFilter] = useState(false);\n  useEffect(() => {\n    fetch('./data.json').then(res => res.json()).then(json => {\n      setProducts(json);\n      localStorage.setItem('defaultProducts', JSON.stringify(json));\n      setPrelaod(false);\n    });\n  }, []);\n\n  function heandlerNextPrev(direction) {\n    const ulWidth = ul.current.offsetWidth;\n    const li = [...ul.current.getElementsByTagName('li')];\n    const liFirst = li[0].offsetWidth;\n    const liFirstitem = li[0];\n    const liFirst_mr = parseInt(window.getComputedStyle(li[0]).getPropertyValue('margin-right'));\n    const liFirstFull_width = liFirst_mr + liFirst;\n    let liFirst_ml = Math.abs(parseInt(window.getComputedStyle(li[0]).getPropertyValue('margin-left')));\n    let ml = 0;\n    let breakPoint = li.length * liFirstFull_width - ulWidth;\n    console.log(breakPoint);\n    if (liFirst_ml < breakPoint + liFirstFull_width) ml = liFirst_ml + liFirstFull_width * (direction == 'prev' ? -1 : 1);\n    liFirstitem.style.marginLeft = `-${ml}px`;\n  }\n\n  function handleAddProduct(event) {\n    const id = +event.target.dataset.id;\n    products.forEach(product => {\n      let flag = true;\n\n      if (product.id === id) {\n        if (basketProduct.length == 0) {\n          product.count = 1;\n          basketProduct.push(product);\n        } else {\n          basketProduct.forEach(basketItem => {\n            if (basketItem.id == id) {\n              basketItem.count += 1;\n              flag = false;\n              console.log(flag + '' + basketItem.id + '' + id + ' измен кол');\n            }\n          });\n\n          if (flag) {\n            product.count = 1;\n            basketProduct.push(product);\n          }\n        }\n      }\n    });\n    localStorage.setItem('basket', JSON.stringify(basketProduct));\n    setBasketProduct([...basketProduct]);\n    console.log(basketProduct);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main_header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main_filter\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"main_filter_name\",\n          children: \"Best Sellers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"main_filter_btn\",\n          onClick: () => {\n            setFilter(true);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"main_filter_logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 83\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this), filter == true ? /*#__PURE__*/_jsxDEV(FilterModul, {\n          setFilter: setFilter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 30\n        }, this) : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main_nav\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn_prev\",\n          onClick: () => {\n            heandlerNextPrev('prev');\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"btn_arrow\",\n            children: \"\\u2190\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 86\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn_next\",\n          onClick: () => {\n            heandlerNextPrev('next');\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"btn_arrow\",\n            children: \"\\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 85\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"catalog\",\n      children: prelaod ? /*#__PURE__*/_jsxDEV(Preload, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 23\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        ref: ul,\n        className: \"catalog_items\",\n        children: /*#__PURE__*/_jsxDEV(Context.Provider, {\n          value: {\n            products,\n            handleAddProduct,\n            setProducts\n          },\n          children: /*#__PURE__*/_jsxDEV(Products, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 34\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 7\n  }, this);\n}\n\n_s(Catalog, \"WHYA4115dvBBGYn4LcStg8k9olI=\");\n\n_c = Catalog;\nexport default Catalog;\n\nvar _c;\n\n$RefreshReg$(_c, \"Catalog\");","map":{"version":3,"sources":["D:/IT-schooll/JS/FinalProdject/wedding-shop/src/Componets/Catalog.js"],"names":["React","Fragment","useContext","useEffect","useState","Products","Context","Preload","UnionContext","FilterModul","Search","Catalog","ul","useRef","basketProduct","setBasketProduct","products","setProducts","prelaod","setPrelaod","filter","setFilter","fetch","then","res","json","localStorage","setItem","JSON","stringify","heandlerNextPrev","direction","ulWidth","current","offsetWidth","li","getElementsByTagName","liFirst","liFirstitem","liFirst_mr","parseInt","window","getComputedStyle","getPropertyValue","liFirstFull_width","liFirst_ml","Math","abs","ml","breakPoint","length","console","log","style","marginLeft","handleAddProduct","event","id","target","dataset","forEach","product","flag","count","push","basketItem"],"mappings":"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","sourcesContent":["import React, {Fragment, useContext, useEffect, useState } from 'react'\r\nimport '../style/catalog.css'\r\nimport Products from \"./Products\";\r\nimport Context from './Context';\r\nimport Preload from './Preload';\r\nimport UnionContext from './UnionContext'\r\nimport FilterModul from './FilterModul'\r\nimport Search from './Search'\r\n\r\nfunction Catalog(){\r\n  const ul = React.useRef();\r\n\r\n  const {basketProduct, setBasketProduct} = useContext(UnionContext)\r\n\r\n  const [products, setProducts] = useState([])\r\n  const [prelaod, setPrelaod] = useState(true)\r\n  const [filter, setFilter] = useState(false)\r\n\r\n\r\n  useEffect(()=>{\r\n    fetch('./data.json')\r\n            .then(res=>res.json())\r\n            .then(json=>{\r\n              setProducts(json)\r\n              localStorage.setItem('defaultProducts', JSON.stringify(json))\r\n              setPrelaod(false)\r\n            })\r\n  },[])\r\n\r\n\r\n  function heandlerNextPrev(direction){\r\n    const ulWidth = ul.current.offsetWidth;\r\n    const li = [...ul.current.getElementsByTagName('li')];\r\n    const liFirst = li[0].offsetWidth;\r\n    const liFirstitem = li[0];\r\n    const liFirst_mr = parseInt(window.getComputedStyle(li[0]).getPropertyValue('margin-right'))\r\n    const liFirstFull_width = liFirst_mr + liFirst\r\n    let liFirst_ml =Math.abs(parseInt(window.getComputedStyle(li[0]).getPropertyValue('margin-left')))\r\n    let ml = 0;\r\n\r\n    let breakPoint = li.length*liFirstFull_width - ulWidth\r\n\r\n    console.log(breakPoint)\r\n\r\n\r\n    if(liFirst_ml < breakPoint + liFirstFull_width ) ml = liFirst_ml + liFirstFull_width*(direction == 'prev'? -1 : 1);\r\n\r\n\r\n    \r\n    liFirstitem.style.marginLeft = `-${ml}px`\r\n    \r\n  }\r\n\r\n  function handleAddProduct(event){\r\n    const id = +event.target.dataset.id\r\n      products.forEach((product)=>{\r\n        let flag = true; \r\n        if(product.id === id){  \r\n                   \r\n           if(basketProduct.length == 0){\r\n             product.count = 1;\r\n             basketProduct.push(product)\r\n           }else{\r\n            basketProduct.forEach((basketItem)=>{\r\n                  if(basketItem.id == id){                      \r\n                        basketItem.count +=1;\r\n                        flag = false\r\n                        console.log(flag+''+basketItem.id+ ''+id +' измен кол')\r\n                        }})\r\n\r\n              if(flag){\r\n                product.count = 1;\r\n                basketProduct.push(product)              \r\n                \r\n              }\r\n           \r\n           }\r\n         }\r\n      })\r\n\r\n      localStorage.setItem('basket',JSON.stringify(basketProduct))\r\n      setBasketProduct([...basketProduct])\r\n      console.log(basketProduct)\r\n\r\n  }\r\n  \r\n  return(\r\n      <Fragment>\r\n      <Search />\r\n            <div className=\"main_header\">\r\n            <div className=\"main_filter\">\r\n              <div className=\"main_filter_name\">Best Sellers</div>\r\n              <button className=\"main_filter_btn\" onClick={()=>{setFilter(true)}}><span className=\"main_filter_logo\"></span></button>\r\n            {filter == true? <FilterModul setFilter={setFilter}/> :''}\r\n            </div>\r\n            <div className=\"main_nav\">\r\n              <button className=\"btn_prev\" onClick={()=>{heandlerNextPrev('prev')}} ><span className=\"btn_arrow\">&#8592;</span></button> \r\n              <button className=\"btn_next\" onClick={()=>{heandlerNextPrev('next')}}><span className=\"btn_arrow\">&#8594;</span></button>             \r\n            </div>\r\n          </div>\r\n          <div className=\"catalog\">\r\n            {prelaod ?<Preload/>:<ul ref={ul} className=\"catalog_items\">\r\n              <Context.Provider value={{products, handleAddProduct, setProducts}}>\r\n                  <Products />\r\n              </Context.Provider>\r\n            </ul> }            \r\n            \r\n          </div>\r\n    </Fragment>\r\n    )\r\n}\r\n\r\nexport default Catalog"]},"metadata":{},"sourceType":"module"}